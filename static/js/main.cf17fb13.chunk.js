(window["webpackJsonprankcare-client"]=window["webpackJsonprankcare-client"]||[]).push([[0],{137:function(e,t,a){},210:function(e,t,a){e.exports=a.p+"static/media/logo.be5ea3ab.png"},211:function(e,t,a){e.exports=a.p+"static/media/crc_logo.f3669c91.png"},222:function(e,t,a){e.exports=a(447)},227:function(e,t,a){},230:function(e,t,a){},241:function(e,t,a){},302:function(e,t,a){},373:function(e,t,a){},375:function(e,t,a){},388:function(e,t,a){},447:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),r=a(10),l=a.n(r),s=(a(227),a(53),a(24)),o=a(17),c=a(16),u=a(19),d=a(18),m=a(11),h=a(20),p=(a(169),a(96)),g=(a(230),a(73)),f=Object({NODE_ENV:"production",PUBLIC_URL:"/login"}).REACT_APP_API_BASE_URL||"http://localhost:5000/api",y="accessToken",b=function(e){var t=new Headers({"Content-Type":"application/json"});localStorage.getItem(y)&&t.append("Authorization","Bearer "+localStorage.getItem(y));var a={headers:t};return e=Object.assign({},a,e),fetch(e.url,e).then(function(e){return e.json().then(function(t){return e.ok?t:Promise.reject(t)})})};a(67);var v=a(36),k=(a(238),a(165)),C=(a(240),a(75)),E=(a(37),a(12)),O=(a(137),a(241),function(e){function t(e){return Object(o.a)(this,t),Object(u.a)(this,Object(d.a)(t).call(this,e))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"site-home-container"},i.a.createElement(v.a,{title:"Sites List"}))}}]),t}(n.Component)),S=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).renderTitle=a.renderTitle.bind(Object(m.a)(a)),a.handleManagerUsersClick=a.handleManagerUsersClick.bind(Object(m.a)(a)),a.handleToxicityClick=a.handleToxicityClick.bind(Object(m.a)(a)),a.handleConsumptionClick=a.handleConsumptionClick.bind(Object(m.a)(a)),a.handleSitesClicked=a.handleSitesClicked.bind(Object(m.a)(a)),a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"home-container"},this.renderTitle(),this.renderHomeView(),this.renderAboutPoints())}},{key:"renderTitle",value:function(){return this.props.currentUser?this.renderCurrentUserTitleBar(this.props.currentUser.isAdmin,this.props.currentUser.name,this.props.currentUser.isAdmin?"(Admin)":"(Client)"):i.a.createElement("h1",{className:"page-title"},"Home")}},{key:"renderAboutPoints",value:function(){return i.a.createElement("div",{className:"about-points-box"},i.a.createElement("ol",null,i.a.createElement("li",null,i.a.createElement("strong",null,i.a.createElement("a",{href:"https://www.crccare.com/our-research/program-1-policy",target:"_blank"},"Best Practice Policy")),i.a.createElement("strong",null,": "),i.a.createElement("em",null,"More effective, efficient and certain national policy for assessing and remediating contamination")),i.a.createElement("li",{style:{marginTop:"16px"}},i.a.createElement("a",{href:"https://www.crccare.com/our-research/program-2-measurement",target:"_blank"},i.a.createElement("strong",null,"Better Measurement")),": ",i.a.createElement("em",null,"More accurate, rapid, reliable and cost-effective measurement and assessment")),i.a.createElement("li",{style:{marginTop:"16px"}},i.a.createElement("strong",null,i.a.createElement("a",{href:"https://www.crccare.com/our-research/program-3-risk-assessment",target:"_blank"},"Minimising Uncertainty in Risk Assessment"),": "),i.a.createElement("em",null,"New technology, methods and knowledge for assessing risks to human health and the environment")),i.a.createElement("li",{style:{marginTop:"16px"}},i.a.createElement("strong",null,i.a.createElement("a",{href:"https://www.crccare.com/our-research/program-4-remediation",target:"_blank"},"Cleaning Up"),": "),i.a.createElement("em",null,"Innovative clean-up technologies and a wider range of effective management options"))))}},{key:"renderHomeView",value:function(){return this.props.currentUser&&this.props.currentUser.isAdmin?i.a.createElement("div",{className:"gutter-container"},i.a.createElement(k.a,{gutter:16},i.a.createElement(C.a,{className:"gutter-row",span:6},i.a.createElement("div",{className:"gutter-box"},i.a.createElement(E.a,{icon:"user",className:"gutter-button",onClick:this.handleManagerUsersClick},"Manage Users"))),i.a.createElement(C.a,{className:"gutter-row",span:6},i.a.createElement("div",{className:"gutter-box"},i.a.createElement(E.a,{icon:"table",className:"gutter-button",onClick:this.handleSitesClicked},"Sites List"))),i.a.createElement(C.a,{className:"gutter-row",span:6},i.a.createElement("div",{className:"gutter-box"},i.a.createElement(E.a,{icon:"database",className:"gutter-button",onClick:this.handleConsumptionClick},"Consumption Data"))),i.a.createElement(C.a,{className:"gutter-row",span:6},i.a.createElement("div",{className:"gutter-box"},i.a.createElement(E.a,{icon:"database",className:"gutter-button",onClick:this.handleToxicityClick},"Toxicity Data"))))):i.a.createElement("div",{className:"gutter-container"},i.a.createElement(k.a,{gutter:16},i.a.createElement(C.a,{className:"gutter-row",span:8},i.a.createElement("div",{className:"gutter-box"},i.a.createElement(E.a,{icon:"table",className:"gutter-button",onClick:this.handleSitesClicked},"Sites List"))),i.a.createElement(C.a,{className:"gutter-row",span:8},i.a.createElement("div",{className:"gutter-box"},i.a.createElement(E.a,{icon:"database",className:"gutter-button",onClick:this.handleConsumptionClick},"Consumption Data"))),i.a.createElement(C.a,{className:"gutter-row",span:8},i.a.createElement("div",{className:"gutter-box"},i.a.createElement(E.a,{icon:"database",className:"gutter-button",onClick:this.handleToxicityClick},"Toxicity Data")))))}},{key:"renderSiteList",value:function(){return i.a.createElement(O,null)}},{key:"renderCurrentUserTitleBar",value:function(e,t,a){return i.a.createElement(v.a,{className:"page-title",title:t,subTitle:a})}},{key:"handleManagerUsersClick",value:function(){this.props.history.push("/manage-users")}},{key:"handleToxicityClick",value:function(){this.props.history.push("/toxicity")}},{key:"handleConsumptionClick",value:function(){this.props.history.push("/consumption")}},{key:"handleSitesClicked",value:function(){this.props.history.push("/sites")}}]),t}(n.Component),j=(a(114),a(28)),w=(a(61),a(4)),N=(a(62),a(7)),x=(a(302),N.a.Item),D=function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=N.a.create()(A);return i.a.createElement("div",{className:"login-container"},i.a.createElement("h1",{className:"page-title"},"Login"),i.a.createElement("div",{className:"login-content"},i.a.createElement(e,{onLogin:this.props.onLogin})))}}]),t}(n.Component),A=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={loading:!1},a.handleSubmit=a.handleSubmit.bind(Object(m.a)(a)),a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),this.props.form.validateFields(function(e,a){e||(t.setState({loading:!0}),function(e){return b({url:f+"/auth/signin",method:"POST",body:JSON.stringify(e)})}(Object.assign({},a)).then(function(e){localStorage.setItem(y,e.accessToken),t.props.onLogin()}).catch(function(e){t.setState({loading:!1}),401===e.status?s.a.error({message:"rankCare",description:"Your Username or Password is incorrect. Please try again!"}):s.a.error({message:"rankCare",description:e.message||"Sorry! Something went wrong. Please try again!"})}))})}},{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return i.a.createElement(N.a,{onSubmit:this.handleSubmit,className:"login-form"},i.a.createElement(x,null,e("username",{rules:[{required:!0,message:"Please input your username"}]})(i.a.createElement(j.a,{prefix:i.a.createElement(w.a,{type:"user"}),size:"large",name:"username",placeholder:"Username"}))),i.a.createElement(x,null,e("password",{rules:[{required:!0,message:"Please input your Password!"}]})(i.a.createElement(j.a,{prefix:i.a.createElement(w.a,{type:"lock"}),size:"large",name:"password",type:"password",placeholder:"Password"}))),i.a.createElement(x,null,i.a.createElement(E.a,{type:"primary",htmlType:"submit",size:"large",className:"login-form-button",loading:this.state.loading},"Login")))}}]),t}(n.Component),P=D,R=(a(135),a(94)),U=(a(170),a(41)),L=a(68),T=(a(373),a(210)),I=a.n(T),F=a(211),B=a.n(F),V=p.a.Header,G=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).handleMenuClick=a.handleMenuClick.bind(Object(m.a)(a)),a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"handleMenuClick",value:function(e){"logout"===e.key&&this.props.onLogout()}},{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement("div",{className:"page-header"},i.a.createElement("img",{className:"crc-title-img",src:B.a,alt:"rankCare"}),i.a.createElement("div",{className:"headertagline"},"CRC CARE brings together industry, government, science and engineering to prevent, assess and clean up environmental contamination")),i.a.createElement(V,{className:"app-header"},i.a.createElement("div",{className:"container"},i.a.createElement("div",null,i.a.createElement(L.b,{to:"/"},i.a.createElement("img",{className:"app-title-img",src:I.a,alt:"rankCare"}))),this.props.currentUser&&this.renderMenu())))}},{key:"renderMenu",value:function(){var e;return this.props.currentUser&&(e=[i.a.createElement(U.a.Item,{key:"/"},i.a.createElement(L.b,{to:"/"},i.a.createElement(w.a,{type:"home",className:"nav-icon"}))),i.a.createElement(U.a.Item,{key:"/profile",className:"profile-menu"},i.a.createElement(M,{currentUser:this.props.currentUser,handleMenuClick:this.handleMenuClick}))]),i.a.createElement(U.a,{className:"app-menu",mode:"horizontal",selectedKeys:[this.props.location.pathname],style:{lineHeight:"64px"}},e)}}]),t}(n.Component);function M(e){var t=i.a.createElement(U.a,{onClick:e.handleMenuClick,className:"profile-dropdown-menu"},i.a.createElement(U.a.Item,{key:"user-info",className:"dropdown-item",disabled:!0},i.a.createElement("div",{className:"user-full-name-info"},e.currentUser.name),i.a.createElement("div",{className:"username-info"},"@",e.currentUser.username)),i.a.createElement(U.a.Divider,null),i.a.createElement(U.a.Item,{key:"logout",className:"dropdown-item"},"Logout"));return i.a.createElement(R.a,{overlay:t,trigger:["click"],getPopupContainer:function(){return document.getElementsByClassName("profile-menu")[0]}},i.a.createElement("a",{className:"ant-dropdown-link"},i.a.createElement(w.a,{type:"user",className:"nav-icon",style:{marginRight:0}})," ",i.a.createElement(w.a,{type:"down"})))}var z=Object(g.g)(G),q=(a(375),function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"page-not-found"},i.a.createElement("h1",{className:"title"},"404"),i.a.createElement("div",{className:"desc"},"The Page you're looking for was not found."),i.a.createElement(L.b,{to:"/"},i.a.createElement(E.a,{className:"go-back-btn",type:"primary",size:"large"},"Go Back")))}}]),t}(n.Component)),W=(a(194),a(132));function _(e){var t=i.a.createElement(w.a,{type:"loading-3-quarters",style:{fontSize:30},spin:!0});return i.a.createElement(W.a,{indicator:t,style:{display:"block",textAlign:"center",marginTop:30}})}a(103);var K=a(58),J=a(57),H=(a(122),a(69)),X=(a(386),a(219)),Y=(a(388),a(121),a(70)),$=(a(390),a(213)),Q=(a(171),a(93)),Z=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).handleOkClick=function(){var e=a.props.isEdit;a.props.form.validateFields(function(t,n){if(!t){a.setState({confirmLoading:!0,isLoading:!0});var i,r=Object.assign({},n);r.id=a.props.id,e?(i=r,b({url:f+"/user/update",method:"POST",body:JSON.stringify(i)})).then(function(e){a.setState({confirmLoading:!1,isLoading:!1}),a.props.form.resetFields(),a.props.onCreate()}).catch(function(e){a.setState({isLoading:!1}),s.a.error({message:"rankCare",description:e.message||"Sorry! Something went wrong. Please try again!"})}):function(e){return b({url:f+"/auth/signup",method:"POST",body:JSON.stringify(e)})}(r).then(function(e){a.setState({confirmLoading:!1,isLoading:!1}),a.props.form.resetFields(),a.props.onCreate()}).catch(function(e){a.setState({isLoading:!1}),s.a.error({message:"rankCare",description:e.message||"Sorry! Something went wrong. Please try again!"})})}})},a.state={confirmLoading:!1,isLoading:!1},a.handleOkClick=a.handleOkClick.bind(Object(m.a)(a)),a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.visible,a=e.onCancel,n=e.form.getFieldDecorator;return i.a.createElement(Y.a,{title:this.props.isEdit?"Edit User":"Add New User",visible:t,onOk:this.handleOkClick,onCancel:a,confirmLoading:this.state.confirmLoading,footer:[i.a.createElement(E.a,{key:"back",onClick:a},"Cancel"),i.a.createElement(E.a,{type:"primary",loading:this.state.isLoading,onClick:this.handleOkClick},"Submit")]},i.a.createElement(N.a,{labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}}},i.a.createElement(N.a.Item,{label:"Name"},n("name",{rules:[{required:!0,message:"Please input name!"},{min:4,max:40}]})(i.a.createElement(j.a,null))),i.a.createElement(N.a.Item,{label:i.a.createElement("span",null,"Username\xa0",i.a.createElement(Q.a,{title:"This is used for login"},i.a.createElement(w.a,{type:"question-circle-o"})))},n("username",{rules:[{required:!0,message:"Please input username!"},{min:3,max:15}]})(i.a.createElement(j.a,{disabled:this.props.isEdit}))),i.a.createElement(N.a.Item,{label:"Password",hasFeedback:!0},n("password",{rules:[{required:!this.props.isEdit,message:"Please input password!"},{min:6,max:20}]})(i.a.createElement(j.a.Password,null))),i.a.createElement(N.a.Item,{label:"E-mail"},n("email",{rules:[{type:"email",message:"The input is not valid E-mail!"},{required:!0,message:"Please input E-mail!"},{max:40}]})(i.a.createElement(j.a,{disabled:this.props.isEdit}))),i.a.createElement(N.a.Item,{label:"Phone Number"},n("phoneNumber",{rules:[{required:!0,message:"Please input phone number!"},{regexp:"^[0-9]*$"},{min:6,max:15}]})(i.a.createElement(j.a,{style:{width:"100%"}}))),i.a.createElement(N.a.Item,{label:"Organization"},n("organization",{rules:[{required:!0,message:"Please input organization!"}]})(i.a.createElement(j.a,null))),i.a.createElement(N.a.Item,{label:"Designation"},n("designation",{rules:[{required:!0,message:"Please input designation!"}]})(i.a.createElement(j.a,null))),i.a.createElement(N.a.Item,{label:"Is Admin"},n("isAdmin",{valuePropName:"checked"})(i.a.createElement($.a,{disabled:this.props.isEdit})))))}}]),t}(n.Component);function ee(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function te(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ee(a,!0).forEach(function(t){Object(J.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ee(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var ae=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).saveFormRef=function(e){a.formRef=e},a.state={currentUser:e.currentUser,isLoading:!1,userModalVisible:!1,selectedUser:null,users:[],columns:[{title:"Name",dataIndex:"name",key:"name",render:function(e,t){return i.a.createElement("a",{className:"user-list-name-link",onClick:function(){return a.handleUserClicked(t)}},e)},sorter:function(e,t){return e.name.length-t.name.length},sortDirections:["descend","ascend"]},{title:"User Name",dataIndex:"username",key:"username"},{title:"Email",dataIndex:"email",key:"email"},{title:"Phone Number",dataIndex:"phoneNumber",key:"phoneNumber"},{title:"Org",dataIndex:"organization",key:"organization",sorter:function(e,t){return e.organization.length-t.organization.length},sortDirections:["descend","ascend"]},{title:"Role",dataIndex:"roles",key:"roles",sorter:function(e,t){return e.roles[0].name.length-t.roles[0].name.length},sortDirections:["descend","ascend"],render:function(e){return i.a.createElement("span",null,e.map(function(e){var t="ROLE_ADMIN"==e.name?"red":"green",a="ROLE_ADMIN"==e.name?"Admin":"Client";return i.a.createElement(X.a,{color:t,key:a},a.toUpperCase())}))}},{title:"Action",dataIndex:"id",key:"id",render:function(e,t){return a.state.users.length>=1&&t.id!=a.state.currentUser.id?i.a.createElement(H.a,{title:"Sure to delete?",onConfirm:function(){return a.handleDelete(t.id)}},i.a.createElement("a",{className:"user-list-delete-link"},i.a.createElement(w.a,{type:"delete",className:"nav-icon"}))):null}}]},a.handleManagerUsersClick=a.handleManagerUsersClick.bind(Object(m.a)(a)),a.handleAddNewUserClick=a.handleAddNewUserClick.bind(Object(m.a)(a)),a.handleDelete=a.handleDelete.bind(Object(m.a)(a)),a.handleAddUserSubmit=a.handleAddUserSubmit.bind(Object(m.a)(a)),a.handleAddUserCancel=a.handleAddUserCancel.bind(Object(m.a)(a)),a.handleUserClicked=a.handleUserClicked.bind(Object(m.a)(a)),a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.loadAllUsers()}},{key:"loadAllUsers",value:function(){var e=this;this.setState({isLoading:!0}),b({url:f+"/users",method:"GET"}).then(function(t){e.setState({isLoading:!1,users:t})}).catch(function(t){e.setState({isLoading:!1,users:[]})})}},{key:"render",value:function(){var e=this.state.selectedUser,t=N.a.create({name:"form_in_modal",mapPropsToFields:function(t){return e?{name:N.a.createFormField(te({},t.name,{value:e.name})),username:N.a.createFormField(te({},t.username,{value:e.username})),email:N.a.createFormField(te({},t.email,{value:e.email})),phoneNumber:N.a.createFormField(te({},t.phoneNumber,{value:e.phoneNumber})),organization:N.a.createFormField(te({},t.organization,{value:e.organization})),designation:N.a.createFormField(te({},t.designation,{value:e.designation})),isAdmin:N.a.createFormField(te({},t.isAdmin,{value:e.admin}))}:{}}})(Z);return i.a.createElement("div",null,i.a.createElement("div",{className:"user-home-container"},i.a.createElement(v.a,{className:"user-list-page-title",title:"Manage Users",onBack:this.handleManagerUsersClick,extra:this.renderNavigationButtons()}),i.a.createElement(K.a,{rowKey:function(e){return e.id},columns:this.state.columns,dataSource:this.state.users})),i.a.createElement(t,{wrappedComponentRef:this.saveFormRef,visible:this.state.userModalVisible,onCancel:this.handleAddUserCancel,onCreate:this.handleAddUserSubmit,isEdit:null!=this.state.selectedUser,id:this.state.selectedUser?this.state.selectedUser.id:null}))}},{key:"renderNavigationButtons",value:function(){return[i.a.createElement(E.a,{key:"1",onClick:this.handleAddNewUserClick},"Add New User")]}},{key:"handleDelete",value:function(e){var t=this;this.setState({isLoading:!0}),function(e){return b({url:f+"/users/"+e,method:"DELETE"})}(e).then(function(e){s.a.success({message:"rankCare",description:"User deleted successfully!"}),t.loadAllUsers()}).catch(function(e){t.setState({isLoading:!1}),s.a.error({message:"rankCare",description:e.message||"Sorry! Something went wrong. Please try again!"})})}},{key:"handleUserClicked",value:function(e){this.setState({userModalVisible:!0,selectedUser:e})}},{key:"handleAddNewUserClick",value:function(){this.setState({userModalVisible:!0,selectedUser:null})}},{key:"handleManagerUsersClick",value:function(){this.props.history.goBack()}},{key:"handleAddUserSubmit",value:function(){this.setState({userModalVisible:!1,selectedUser:null}),this.loadAllUsers()}},{key:"handleAddUserCancel",value:function(){this.setState({userModalVisible:!1,selectedUser:null})}}]),t}(n.Component),ne=(a(161),a(44)),ie=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).handleOkClick=function(){var e=a.props.isEdit;a.props.form.validateFields(function(t,n){if(!t){a.setState({confirmLoading:!0,isLoading:!0});var i=Object.assign({},n);i.id=a.props.id,e?function(e){return b({url:f+"/toxicity/update",method:"POST",body:JSON.stringify(e)})}(i).then(function(e){a.setState({confirmLoading:!1,isLoading:!1}),a.props.form.resetFields(),a.props.onCreate()}).catch(function(e){a.setState({isLoading:!1}),s.a.error({message:"rankCare",description:e.message||"Sorry! Something went wrong. Please try again!"})}):function(e){return b({url:f+"/toxicity/insert",method:"POST",body:JSON.stringify(e)})}(i).then(function(e){a.setState({confirmLoading:!1,isLoading:!1}),a.props.form.resetFields(),a.props.onCreate()}).catch(function(e){a.setState({isLoading:!1}),s.a.error({message:"rankCare",description:e.message||"Sorry! Something went wrong. Please try again!"})})}})},a.checkNumber=function(e,t,a){console.log("Value "+t),t>0?a():a("This field should be number!")},a.state={confirmLoading:!1,isLoading:!1},a.handleOkClick=a.handleOkClick.bind(Object(m.a)(a)),a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.visible,a=e.onCancel,n=e.form.getFieldDecorator;return i.a.createElement(Y.a,{width:"600px",title:this.props.isEdit?"Edit Toxicity Data":"Add Toxicity Data",visible:t,onOk:this.handleOkClick,onCancel:a,confirmLoading:this.state.confirmLoading,footer:[i.a.createElement(E.a,{key:"back",onClick:a},"Cancel"),i.a.createElement(E.a,{type:"primary",key:"submit",loading:this.state.isLoading,onClick:this.handleOkClick},"Submit")]},i.a.createElement(N.a,{labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}}},i.a.createElement(N.a.Item,{label:"Chemical Name"},n("chemicalName",{rules:[{required:!0,message:"Please input chemical name!"}]})(i.a.createElement(j.a,null))),i.a.createElement(N.a.Item,{label:"Chemical Formula"},n("chemicalFormula",{rules:[{required:!0,message:"Please input Chemical Formula!"}]})(i.a.createElement(j.a,null))),i.a.createElement(N.a.Item,{label:"Soil Guideline"},n("soilGuideline",{rules:[{required:!0,message:"Please input Soil Guideline!"},{validator:this.checkNumber}]})(i.a.createElement(ne.a,null))),i.a.createElement(N.a.Item,{label:"Soil Reference"},n("soilRef",{rules:[{required:!0,message:"Please input Soil Reference!"}]})(i.a.createElement(j.a,null))),i.a.createElement(N.a.Item,{label:"Water Guideline"},n("waterGuideline",{rules:[{required:!0,message:"Please input Water Guideline!"},{validator:this.checkNumber}]})(i.a.createElement(ne.a,null))),i.a.createElement(N.a.Item,{label:"Water Reference"},n("waterRef",{rules:[{required:!0,message:"Please input Water Reference!"}]})(i.a.createElement(j.a,null))),i.a.createElement(N.a.Item,{label:"Dosage Reference"},n("dosageRef",{rules:[{required:!0,message:"Please input Dosage Reference!"},{validator:this.checkNumber}]})(i.a.createElement(ne.a,null))),i.a.createElement(N.a.Item,{label:"Reference"},n("reference",{rules:[{required:!0,message:"Please input Reference!"}]})(i.a.createElement(j.a,null))),i.a.createElement(N.a.Item,{label:"Cancer Slope Factor"},n("cancerSlopeFactor",{rules:[{required:!0,message:"Please input Cancer Slope Factor!"},{validator:this.checkNumber}]})(i.a.createElement(ne.a,null))),i.a.createElement(N.a.Item,{label:"Cancer Slope Reference"},n("cancerSlopeRef",{rules:[{required:!0,message:"Please input Cancer Slope Reference!"}]})(i.a.createElement(j.a,null)))))}}]),t}(n.Component);function re(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function le(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?re(a,!0).forEach(function(t){Object(J.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):re(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var se=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).saveFormRef=function(e){a.formRef=e},a.state={currentUser:e.currentUser,isAdmin:e.currentUser.isAdmin,isLoading:!1,modalVisible:!1,selectedToxicity:null,toxicityResponse:null,toxicityData:[],currentPage:0,pageSize:20,totalRecords:0,columns:e.currentUser.isAdmin?[{title:"Chemical Name",dataIndex:"chemicalName",key:"chemicalName",render:function(e,t){return i.a.createElement("a",{className:"user-list-name-link",onClick:function(){return a.handleToxicityClick(t)}},e)},sorter:function(e,t){return e.chemicalName.length-t.chemicalName.length},sortDirections:["descend","ascend"]},{title:"Formula",dataIndex:"chemicalFormula",key:"chemicalFormula"},{title:"Soil Guideline",dataIndex:"soilGuideline",key:"soilGuideline"},{title:"Soil Ref",dataIndex:"soilRef",key:"soilRef"},{title:"Water Guideline",dataIndex:"waterGuideline",key:"waterGuideline"},{title:"Water Ref",dataIndex:"waterRef",key:"waterRef"},{title:"Dosage Ref",dataIndex:"dosageRef",key:"dosageRef"},{title:"Reference",dataIndex:"reference",key:"reference"},{title:"Cancer Slope Factor",dataIndex:"cancerSlopeFactor",key:"cancerSlopeFactor"},{title:"Cancer Slope Ref",dataIndex:"cancerSlopeRef",key:"cancerSlopeRef"},{title:"Action",dataIndex:"id",key:"id",render:function(e,t){return i.a.createElement(H.a,{title:"Sure to delete?",onConfirm:function(){return a.handleDelete(t.id)}},i.a.createElement("a",{className:"user-list-delete-link"},i.a.createElement(w.a,{type:"delete",className:"nav-icon"})))}}]:[{title:"Chemical Name",dataIndex:"chemicalName",key:"chemicalName",sorter:function(e,t){return e.chemicalName.length-t.chemicalName.length},sortDirections:["descend","ascend"]},{title:"Formula",dataIndex:"chemicalFormula",key:"chemicalFormula"},{title:"Soil Guideline",dataIndex:"soilGuideline",key:"soilGuideline"},{title:"Soil Ref",dataIndex:"soilRef",key:"soilRef"},{title:"Water Guideline",dataIndex:"waterGuideline",key:"waterGuideline"},{title:"Water Ref",dataIndex:"waterRef",key:"waterRef"},{title:"Dosage Ref",dataIndex:"dosageRef",key:"dosageRef"},{title:"Reference",dataIndex:"reference",key:"reference"},{title:"Cancer Slope Factor",dataIndex:"cancerSlopeFactor",key:"cancerSlopeFactor"},{title:"Cancer Slope Ref",dataIndex:"cancerSlopeRef",key:"cancerSlopeRef"}]},a.handleBackClick=a.handleBackClick.bind(Object(m.a)(a)),a.handleAddNewDataClick=a.handleAddNewDataClick.bind(Object(m.a)(a)),a.handleDelete=a.handleDelete.bind(Object(m.a)(a)),a.handleAddUserSubmit=a.handleAddUserSubmit.bind(Object(m.a)(a)),a.handleAddUserCancel=a.handleAddUserCancel.bind(Object(m.a)(a)),a.handleToxicityClick=a.handleToxicityClick.bind(Object(m.a)(a)),a.onPageChanged=a.onPageChanged.bind(Object(m.a)(a)),a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.loadData(0)}},{key:"loadData",value:function(e){var t=this;this.setState({isLoading:!0,currentPage:e}),function(e,t){return b({url:f+"/toxicity?page="+e+"&count="+t,method:"GET"})}(e,this.state.pageSize).then(function(e){t.setState({isLoading:!1,toxicityResponse:e,toxicityData:e.data,totalRecords:e.pageCnt*t.state.pageSize})}).catch(function(e){t.setState({isLoading:!1,toxicityResponse:null,totalRecords:0,toxicityData:[]})})}},{key:"onPageChanged",value:function(e,t,a){this.loadData(e.current-1)}},{key:"render",value:function(){var e=this.state.selectedToxicity,t=N.a.create({name:"form_in_modal",mapPropsToFields:function(t){return e?{chemicalName:N.a.createFormField(le({},t.chemicalName,{value:e.chemicalName})),chemicalFormula:N.a.createFormField(le({},t.chemicalFormula,{value:e.chemicalFormula})),soilGuideline:N.a.createFormField(le({},t.soilGuideline,{value:e.soilGuideline})),soilRef:N.a.createFormField(le({},t.soilRef,{value:e.soilRef})),waterGuideline:N.a.createFormField(le({},t.waterGuideline,{value:e.waterGuideline})),waterRef:N.a.createFormField(le({},t.dosageRef,{value:e.waterRef})),dosageRef:N.a.createFormField(le({},t.dosageRef,{value:e.dosageRef})),reference:N.a.createFormField(le({},t.reference,{value:e.reference})),cancerSlopeFactor:N.a.createFormField(le({},t.cancerSlopeFactor,{value:e.cancerSlopeFactor})),cancerSlopeRef:N.a.createFormField(le({},t.cancerSlopeRef,{value:e.cancerSlopeRef}))}:{}}})(ie);return i.a.createElement("div",null,i.a.createElement("div",{className:"user-home-container"},i.a.createElement(v.a,{className:"user-list-page-title",title:"Toxicity Data",onBack:this.handleBackClick,extra:this.renderNavigationButtons()}),i.a.createElement(K.a,{rowKey:function(e){return e.id},columns:this.state.columns,dataSource:this.state.toxicityData,onChange:this.onPageChanged,pagination:{total:this.state.totalRecords,defaultPageSize:this.state.pageSize,current:this.state.currentPage}})),i.a.createElement(t,{wrappedComponentRef:this.saveFormRef,visible:this.state.modalVisible,onCancel:this.handleAddUserCancel,onCreate:this.handleAddUserSubmit,isEdit:null!=this.state.selectedToxicity,id:this.state.selectedToxicity?this.state.selectedToxicity.id:null}))}},{key:"renderNavigationButtons",value:function(){if(this.state.isAdmin)return[i.a.createElement(E.a,{key:"1",onClick:this.handleAddNewDataClick},"Add New Row")]}},{key:"handleDelete",value:function(e){var t=this;this.setState({isLoading:!0}),function(e){return b({url:f+"/toxicity/"+e,method:"DELETE"})}(e).then(function(e){s.a.success({message:"rankCare",description:"Toxicity deleted successfully!"}),t.loadData(t.state.currentPage)}).catch(function(e){t.setState({isLoading:!1}),s.a.error({message:"rankCare",description:e.message||"Sorry! Something went wrong. Please try again!"})})}},{key:"handleToxicityClick",value:function(e){this.setState({modalVisible:!0,selectedToxicity:e})}},{key:"handleAddNewDataClick",value:function(){this.setState({modalVisible:!0,selectedToxicity:null})}},{key:"handleBackClick",value:function(){this.props.history.goBack()}},{key:"handleAddUserSubmit",value:function(){this.setState({modalVisible:!1,selectedToxicity:null}),this.loadData(this.state.currentPage)}},{key:"handleAddUserCancel",value:function(){this.setState({modalVisible:!1,selectedToxicity:null})}}]),t}(n.Component),oe=(a(159),a(48)),ce=oe.a.Option,ue=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).handleOkClick=function(){var e=a.props.isEdit;a.props.form.validateFields(function(t,n){if(!t){a.setState({confirmLoading:!0,isLoading:!0});var i=Object.assign({},n);i.id=a.props.id,e?function(e){return b({url:f+"/consumption/update",method:"POST",body:JSON.stringify(e)})}(i).then(function(e){a.setState({confirmLoading:!1,isLoading:!1}),a.props.form.resetFields(),a.props.onCreate()}).catch(function(e){a.setState({isLoading:!1}),s.a.error({message:"rankCare",description:e.message||"Sorry! Something went wrong. Please try again!"})}):function(e){return b({url:f+"/consumption/insert",method:"POST",body:JSON.stringify(e)})}(i).then(function(e){a.setState({confirmLoading:!1,isLoading:!1}),a.props.form.resetFields(),a.props.onCreate()}).catch(function(e){a.setState({isLoading:!1}),s.a.error({message:"rankCare",description:e.message||"Sorry! Something went wrong. Please try again!"})})}})},a.checkNumber=function(e,t,a){"ageTo"===e.field&&null===t||t>0?a():a("This field should be number!")},a.state={confirmLoading:!1,isLoading:!1},a.handleOkClick=a.handleOkClick.bind(Object(m.a)(a)),a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.visible,a=e.onCancel,n=e.form,r=n.getFieldDecorator,l=n.getFieldValue;return i.a.createElement(Y.a,{width:"800px",title:this.props.isEdit?"Edit Consumption Data":"Add Consumption Data",visible:t,onOk:this.handleOkClick,onCancel:a,confirmLoading:this.state.confirmLoading,footer:[i.a.createElement(E.a,{key:"back",onClick:a},"Cancel"),i.a.createElement(E.a,{type:"primary",key:"submit",loading:this.state.isLoading,onClick:this.handleOkClick},"Submit")]},i.a.createElement(N.a,{labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}}},i.a.createElement(N.a.Item,{label:"Age Group From"},r("ageGrp",{rules:[{required:!0,message:"Please input age group!"}]})(i.a.createElement(oe.a,{value:l("ageGrp"),style:{width:"25%"}},i.a.createElement(ce,{value:"0-3"},"0-3"),i.a.createElement(ce,{value:"3-6"},"3-6"),i.a.createElement(ce,{value:"6-10"},"6-10"),i.a.createElement(ce,{value:"10-18"},"10-18"),i.a.createElement(ce,{value:"18+"},"18+")))),i.a.createElement(N.a.Item,{label:"Body Weight Avg"},r("bodyWtAvg",{rules:[{required:!0,message:"Please input Body Weight Average!"},{validator:this.checkNumber}]})(i.a.createElement(ne.a,null))),i.a.createElement(N.a.Item,{label:"Confidence Limit 95% of soil"},r("ciData1",{rules:[{required:!0,message:"Please input CI Data 1!"},{validator:this.checkNumber}]})(i.a.createElement(ne.a,null))),i.a.createElement(N.a.Item,{label:"Confidence Limit 95% of water"},r("ciData2",{rules:[{required:!0,message:"Please input CI Data 2!"},{validator:this.checkNumber}]})(i.a.createElement(ne.a,null))),i.a.createElement(N.a.Item,{label:"Soil In Avg"},r("soilInvAvg",{rules:[{required:!0,message:"Please input Soil In Avg!"},{validator:this.checkNumber}]})(i.a.createElement(ne.a,null))),i.a.createElement(N.a.Item,{label:"Water Consumption Avg"},r("waterConsAvg",{rules:[{required:!0,message:"Please input Water Consumption Avg!"},{validator:this.checkNumber}]})(i.a.createElement(ne.a,null)))))}}]),t}(n.Component);function de(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function me(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?de(a,!0).forEach(function(t){Object(J.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):de(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var he=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).saveFormRef=function(e){a.formRef=e},a.state={currentUser:e.currentUser,isAdmin:e.currentUser.isAdmin,isLoading:!1,modalVisible:!1,selectedConsumption:null,consumptionResponse:null,consumptionData:[],currentPage:0,pageSize:20,totalRecords:0,columns:e.currentUser.isAdmin?[{title:"Age Group",dataIndex:"ageGrp",key:"ageGrp",render:function(e,t){return i.a.createElement("a",{className:"user-list-name-link",onClick:function(){return a.handleConsumptionClick(t)}},e)},sorter:function(e,t){return e.ageGrp.length-t.ageGrp.length},sortDirections:["descend","ascend"]},{title:"Body Weight Avg",dataIndex:"bodyWtAvg",key:"bodyWtAvg"},{title:"Confidence Limit 95% of soil",dataIndex:"ciData1",key:"ciData1"},{title:"Confidence Limit 95% of water",dataIndex:"ciData2",key:"ciData2"},{title:"Soil In Avg",dataIndex:"soilInvAvg",key:"soilInvAvg"},{title:"Water Consumption Avg",dataIndex:"waterConsAvg",key:"waterConsAvg"},{title:"Action",dataIndex:"id",key:"id",render:function(e,t){return i.a.createElement(H.a,{title:"Sure to delete?",onConfirm:function(){return a.handleDelete(t.id)}},i.a.createElement("a",{className:"user-list-delete-link"},i.a.createElement(w.a,{type:"delete",className:"nav-icon"})))}}]:[{title:"Age Group",dataIndex:"ageGrp",key:"ageGrp",sorter:function(e,t){return e.ageGrp.length-t.ageGrp.length},sortDirections:["descend","ascend"]},{title:"Body Weight Avg",dataIndex:"bodyWtAvg",key:"bodyWtAvg"},{title:"Confidence Limit 95% of soil",dataIndex:"ciData1",key:"ciData1"},{title:"Confidence Limit 95% of water",dataIndex:"ciData2",key:"ciData2"},{title:"Soil In Avg",dataIndex:"soilInvAvg",key:"soilInvAvg"},{title:"Water Consumption Avg",dataIndex:"waterConsAvg",key:"waterConsAvg"}]},a.handleBackClick=a.handleBackClick.bind(Object(m.a)(a)),a.handleAddNewDataClick=a.handleAddNewDataClick.bind(Object(m.a)(a)),a.handleDelete=a.handleDelete.bind(Object(m.a)(a)),a.handleAddUserSubmit=a.handleAddUserSubmit.bind(Object(m.a)(a)),a.handleAddUserCancel=a.handleAddUserCancel.bind(Object(m.a)(a)),a.handleConsumptionClick=a.handleConsumptionClick.bind(Object(m.a)(a)),a.onPageChanged=a.onPageChanged.bind(Object(m.a)(a)),a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.loadData(0)}},{key:"loadData",value:function(e){var t=this;this.setState({isLoading:!0,currentPage:e}),function(e,t){return b({url:f+"/consumption?page="+e+"&count="+t,method:"GET"})}(e,this.state.pageSize).then(function(e){t.setState({isLoading:!1,consumptionResponse:e,consumptionData:e.data,totalRecords:e.pageCnt*t.state.pageSize})}).catch(function(e){t.setState({isLoading:!1,consumptionResponse:null,totalRecords:0,consumptionData:[]})})}},{key:"onPageChanged",value:function(e,t,a){this.loadData(e.current-1)}},{key:"render",value:function(){var e=this.state.selectedConsumption,t=N.a.create({name:"form_in_modal",mapPropsToFields:function(t){return e?{ageGrp:N.a.createFormField(me({},t.ageGrp,{value:e.ageGrp})),bodyWtAvg:N.a.createFormField(me({},t.bodyWtAvg,{value:e.bodyWtAvg})),ciData1:N.a.createFormField(me({},t.ciData1,{value:e.ciData1})),ciData2:N.a.createFormField(me({},t.ciData2,{value:e.ciData2})),soilInvAvg:N.a.createFormField(me({},t.soilInvAvg,{value:e.soilInvAvg})),waterConsAvg:N.a.createFormField(me({},t.waterConsAvg,{value:e.waterConsAvg}))}:{}}})(ue);return i.a.createElement("div",null,i.a.createElement("div",{className:"user-home-container"},i.a.createElement(v.a,{className:"user-list-page-title",title:"Consumption Data",onBack:this.handleBackClick,extra:this.renderNavigationButtons()}),i.a.createElement(K.a,{rowKey:function(e){return e.id},columns:this.state.columns,dataSource:this.state.consumptionData,onChange:this.onPageChanged,pagination:{total:this.state.totalRecords,defaultPageSize:this.state.pageSize,current:this.state.currentPage}})),i.a.createElement(t,{wrappedComponentRef:this.saveFormRef,visible:this.state.modalVisible,onCancel:this.handleAddUserCancel,onCreate:this.handleAddUserSubmit,isEdit:null!=this.state.selectedConsumption,id:this.state.selectedConsumption?this.state.selectedConsumption.id:null}))}},{key:"renderNavigationButtons",value:function(){if(this.state.isAdmin)return[i.a.createElement(E.a,{key:"1",onClick:this.handleAddNewDataClick},"Add New Row")]}},{key:"handleDelete",value:function(e){var t=this;this.setState({isLoading:!0}),function(e){return b({url:f+"/consumption/"+e,method:"DELETE"})}(e).then(function(e){s.a.success({message:"rankCare",description:"Toxicity deleted successfully!"}),t.loadData(t.state.currentPage)}).catch(function(e){t.setState({isLoading:!1}),s.a.error({message:"rankCare",description:e.message||"Sorry! Something went wrong. Please try again!"})})}},{key:"handleConsumptionClick",value:function(e){this.setState({modalVisible:!0,selectedConsumption:e})}},{key:"handleAddNewDataClick",value:function(){this.setState({modalVisible:!0,selectedConsumption:null})}},{key:"handleBackClick",value:function(){this.props.history.goBack()}},{key:"handleAddUserSubmit",value:function(){this.setState({modalVisible:!1,selectedConsumption:null}),this.loadData(this.state.currentPage)}},{key:"handleAddUserCancel",value:function(){this.setState({modalVisible:!1,selectedConsumption:null})}}]),t}(n.Component);function pe(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function ge(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?pe(a,!0).forEach(function(t){Object(J.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):pe(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var fe=oe.a.Option,ye=function(e){function t(e){var a;Object(o.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).handleNumberChange=function(e){var t=parseFloat(e||0,10);isNaN(t)||("value"in a.props||a.setState({contaminationValue:t}),a.triggerChange({contaminationValue:t}))},a.handleContaminationTypeChange=function(e){"value"in a.props||a.setState({contaminationType:e}),a.triggerChange({contaminationType:e})},a.handleChemicalChange=function(e){var t=a.props.chemicals.find(function(t){return t.id===e}).chemicalName;"value"in a.props||a.setState({chemicalId:e,chemicalName:t}),a.triggerChange({chemicalId:e,chemicalName:t})},a.triggerChange=function(e){var t=a.props.onChange;t&&t(ge({},a.state,{},e))};var n=e.value||{},r=e.chemicals||[],l=r.map(function(e){return i.a.createElement(fe,{key:e.id,value:e.id},e.chemicalName)});return a.state={chemicalOptions:l,chemicalId:r[0].id||0,chemicalName:r[0].chemicalName||"",contaminationValue:n.contaminationValue||0,contaminationType:n.contaminationType||"soil"},a}return Object(h.a)(t,e),Object(c.a)(t,null,[{key:"getDerivedStateFromProps",value:function(e){return"value"in e?ge({},e.value||{}):null}}]),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.size,t=this.state,a=t.chemicalOptions,n=t.chemicalId,r=t.contaminationType,l=t.contaminationValue;return i.a.createElement("span",null,i.a.createElement(oe.a,{value:r,size:e,style:{width:"22%",marginRight:"3%"},onChange:this.handleContaminationTypeChange},i.a.createElement(fe,{value:"soil"},"Soil"),i.a.createElement(fe,{value:"water"},"Water")),i.a.createElement(oe.a,{value:n,size:e,style:{width:"42%",marginRight:"3%"},onChange:this.handleChemicalChange},a),i.a.createElement(ne.a,{type:"text",size:e,value:l,onChange:this.handleNumberChange,style:{width:this.props.showRemove?"20%":"30%",marginRight:this.props.showRemove?"5%":"0"}}))}}]),t}(i.a.Component),be=0,ve=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).handleOkClick=function(){var e=a.props.isEdit;a.props.form.validateFields(function(t,n){if(!t){a.setState({confirmLoading:!0,isLoading:!0});var i=n.chemicals.filter(function(e){return e}),r={id:a.props.id,siteName:n.siteName,siteLocation:n.siteLocation,state:n.siteState,orgName:n.siteOrg,siteContaminant:i};console.log("Form values "+JSON.stringify(r)),e||function(e){return b({url:f+"/site/add",method:"POST",body:JSON.stringify(e)})}(r).then(function(e){a.setState({confirmLoading:!1,isLoading:!1}),a.props.form.resetFields(),a.props.onCreate()}).catch(function(e){a.setState({isLoading:!1}),s.a.error({message:"rankCare",description:e.message||"Sorry! Something went wrong. Please try again!"})})}})},a.checkNumber=function(e,t,a){null==t||t.contaminationValue||t.contaminationValue>0?a():a("This field should be number!")},a.remove=function(e){var t=a.props.form,n=t.getFieldValue("keys");t.setFieldsValue({keys:n.filter(function(t){return t!==e})})},a.add=function(){var e=a.props.form,t=e.getFieldValue("keys").concat(be++);e.setFieldsValue({keys:t})},a.state={confirmLoading:!1,isLoading:!1},a.handleOkClick=a.handleOkClick.bind(Object(m.a)(a)),a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){0===this.props.form.getFieldValue("keys").length&&this.add()}},{key:"render",value:function(){var e=this,t={labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}}},a=this.props,n=a.visible,r=a.onCancel,l=a.form,s=l.getFieldDecorator,o=l.getFieldValue;s("keys",{initialValue:[]});var c=o("keys").map(function(a,n){return i.a.createElement(N.a.Item,Object.assign({},t,{label:"Chemical "+(n+1),required:!1,key:a}),s("chemicals[".concat(a,"]"),{validateTrigger:["onChange","onBlur"],rules:[{required:!0,message:0==n?"Please input chemical contamination value":"Please input chemical contamination value or delete the field"},{validator:e.checkNumber}]})(i.a.createElement(ye,{showRemove:n>0,chemicals:e.props.chemicals,style:{width:"60%",marginRight:8}})),n>0?i.a.createElement(w.a,{className:"dynamic-delete-button",type:"minus-circle-o",onClick:function(){return e.remove(a)}}):null)});return i.a.createElement(Y.a,{width:"600px",title:this.props.isEdit?"Edit Site Data":"Add Site Data",visible:n,onOk:this.handleOkClick,onCancel:r,confirmLoading:this.state.confirmLoading,footer:[i.a.createElement(E.a,{key:"back",onClick:r},"Cancel"),i.a.createElement(E.a,{type:"primary",key:"submit",loading:this.state.isLoading,onClick:this.handleOkClick},"Submit")]},i.a.createElement(N.a,t,i.a.createElement(N.a.Item,{label:"Site Name"},s("siteName",{rules:[{required:!0,message:"Please input site name!"}]})(i.a.createElement(j.a,null))),i.a.createElement(N.a.Item,{label:"Site Location"},s("siteLocation",{rules:[{required:!0,message:"Please input Site Location!"}]})(i.a.createElement(j.a,null))),i.a.createElement(N.a.Item,{label:"Site State"},s("siteState",{rules:[{required:!0,message:"Please input Site State!"}]})(i.a.createElement(j.a,null))),i.a.createElement(N.a.Item,{label:"Site Org"},s("siteOrg",{rules:[{required:!0,message:"Please input Site Org!"}]})(i.a.createElement(j.a,null))),c,i.a.createElement(N.a.Item,{wrapperCol:{xs:{span:24,offset:0},sm:{span:20,offset:4}}},i.a.createElement(E.a,{type:"dashed",onClick:this.add,style:{width:"60%"}},i.a.createElement(w.a,{type:"plus"})," Add Chemical"))))}}]),t}(n.Component);function ke(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function Ce(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ke(a,!0).forEach(function(t){Object(J.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ke(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var Ee=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).saveFormRef=function(e){a.formRef=e},a.state={currentUser:e.currentUser,isAdmin:e.currentUser.isAdmin,isLoading:!1,modalVisible:!1,selectedSite:null,sitesResponse:null,chemicals:[],sitesData:[],currentPage:0,pageSize:20,totalRecords:0,selectedRowKeys:[],selectedRows:[],columns:e.currentUser.isAdmin?[{title:"Site Name",dataIndex:"siteName",key:"siteName",render:function(e,t){return i.a.createElement("a",{className:"user-list-name-link",onClick:function(){return a.handleSiteClick(t)}},e)},sorter:function(e,t){return e.siteName.length-t.siteName.length},sortDirections:["descend","ascend"]},{title:"Site Location",dataIndex:"siteLocation",key:"siteLocation"},{title:"Site State",dataIndex:"siteState",key:"siteState"},{title:"Site Org",dataIndex:"siteOrg",key:"siteOrg"},{title:"Action",dataIndex:"id",key:"id",render:function(e,t){return i.a.createElement(H.a,{title:"Sure to delete?",onConfirm:function(){return a.handleDelete(t.id)}},i.a.createElement("a",{className:"user-list-delete-link"},i.a.createElement(w.a,{type:"delete",className:"nav-icon"})))}}]:[{title:"Site Name",dataIndex:"siteName",key:"siteName",render:function(e,t){return i.a.createElement("a",{className:"user-list-name-link",onClick:function(){return a.handleSiteClick(t)}},e)},sorter:function(e,t){return e.siteName.length-t.siteName.length},sortDirections:["descend","ascend"]},{title:"Site Location",dataIndex:"siteLocation",key:"siteLocation"},{title:"Site State",dataIndex:"siteState",key:"siteState"},{title:"Site Org",dataIndex:"siteOrg",key:"siteOrg"}]},a.handleBackClick=a.handleBackClick.bind(Object(m.a)(a)),a.handleAddNewDataClick=a.handleAddNewDataClick.bind(Object(m.a)(a)),a.handleDelete=a.handleDelete.bind(Object(m.a)(a)),a.handleAddUserSubmit=a.handleAddUserSubmit.bind(Object(m.a)(a)),a.handleAddUserCancel=a.handleAddUserCancel.bind(Object(m.a)(a)),a.handleSiteClick=a.handleSiteClick.bind(Object(m.a)(a)),a.onPageChanged=a.onPageChanged.bind(Object(m.a)(a)),a.onSelectChange=a.onSelectChange.bind(Object(m.a)(a)),a.compareSites=a.compareSites.bind(Object(m.a)(a)),a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.loadData(0),this.loadAllChemicals()}},{key:"loadData",value:function(e){var t=this;this.setState({isLoading:!0,currentPage:e}),function(e,t){return b({url:f+"/sites?page="+e+"&count="+t,method:"GET"})}(e,this.state.pageSize).then(function(e){t.setState({isLoading:!1,sitesResponse:e,sitesData:e.data,selectedRowKeys:[],selectedRows:[],totalRecords:e.pageCnt*t.state.pageSize})}).catch(function(e){t.setState({isLoading:!1,sitesResponse:null,totalRecords:0,selectedRowKeys:[],selectedRows:[],sitesData:[]})})}},{key:"loadAllChemicals",value:function(){var e=this;b({url:f+"/chemicals",method:"GET"}).then(function(t){e.setState({chemicals:t})}).catch(function(t){e.setState({chemicals:[]})})}},{key:"onPageChanged",value:function(e,t,a){this.loadData(e.current-1)}},{key:"onSelectChange",value:function(e,t){this.setState({selectedRowKeys:e,selectedRows:t})}},{key:"render",value:function(){var e=this.state.selectedSite,t=this.state,a=(t.loading,{selectedRowKeys:t.selectedRowKeys,onChange:this.onSelectChange}),n=N.a.create({name:"form_in_modal",mapPropsToFields:function(t){return e?{siteName:N.a.createFormField(Ce({},t.siteName,{value:e.siteName})),siteLocation:N.a.createFormField(Ce({},t.siteLocation,{value:e.siteLocation})),siteState:N.a.createFormField(Ce({},t.siteState,{value:e.siteState})),siteOrg:N.a.createFormField(Ce({},t.siteOrg,{value:e.siteOrg}))}:{}}})(ve);return i.a.createElement("div",null,i.a.createElement("div",{className:"user-home-container"},i.a.createElement(v.a,{className:"user-list-page-title",title:"Sites Data",onBack:this.handleBackClick,extra:this.renderNavigationButtons()}),i.a.createElement(K.a,{rowSelection:a,rowKey:function(e){return e.id},columns:this.state.columns,dataSource:this.state.sitesData,onChange:this.onPageChanged,pagination:{total:this.state.totalRecords,defaultPageSize:this.state.pageSize,current:this.state.currentPage}})),i.a.createElement(n,{wrappedComponentRef:this.saveFormRef,visible:this.state.modalVisible,onCancel:this.handleAddUserCancel,onCreate:this.handleAddUserSubmit,isEdit:null!=this.state.selectedSite,chemicals:this.state.chemicals,id:this.state.selectedSite?this.state.selectedSite.id:null}))}},{key:"renderNavigationButtons",value:function(){var e=this.state.selectedRowKeys.length>0;return this.state.isAdmin?[i.a.createElement(E.a,{key:"2",type:"primary",onClick:this.compareSites,disabled:!e,loading:this.state.loading},"Compare"),i.a.createElement(E.a,{key:"1",onClick:this.handleAddNewDataClick},"Add New Row")]:[i.a.createElement(E.a,{key:"2",type:"primary",onClick:this.compareSites,disabled:!e,loading:this.state.loading},"Compare")]}},{key:"handleDelete",value:function(e){var t=this;this.setState({isLoading:!0}),function(e){return b({url:f+"/site/"+e,method:"DELETE"})}(e).then(function(e){s.a.success({message:"rankCare",description:"Site deleted successfully!"}),t.loadData(t.state.currentPage)}).catch(function(e){t.setState({isLoading:!1}),s.a.error({message:"rankCare",description:e.message||"Sorry! Something went wrong. Please try again!"})})}},{key:"handleSiteClick",value:function(e){this.props.history.push("/site-details?sites="+e.id)}},{key:"handleAddNewDataClick",value:function(){this.setState({modalVisible:!0,selectedSite:null})}},{key:"handleBackClick",value:function(){this.props.history.goBack()}},{key:"handleAddUserSubmit",value:function(){this.setState({modalVisible:!1,selectedSite:null}),this.loadData(this.state.currentPage)}},{key:"handleAddUserCancel",value:function(){this.setState({modalVisible:!1,selectedSite:null})}},{key:"compareSites",value:function(){var e=this.state.selectedRows.map(function(e){return e.id});this.props.history.push("/site-compare?sites="+e)}}]),t}(n.Component),Oe=(a(434),a(98)),Se=a(35),je=a(83),we=a(218),Ne=a.n(we),xe=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={fields:e.fields,data:e.data,key:e.key,value:e.value},a.handleToolTipClicked=a.handleToolTipClicked.bind(Object(m.a)(a)),a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"handleToolTipClicked",value:function(){}},{key:"render",value:function(){var e=this,t=this.state.data,a=(new Ne.a).createView().source(t);return a.transform({type:"fold",fields:this.state.fields,key:"X-Axis",value:"Tier Value"}),i.a.createElement("div",null,i.a.createElement(je.Chart,{width:1e3,height:500,data:a,forceFit:!0,onPlotClick:function(t){e.props.onSiteClicked(t.data._origin["X-Axis"])}},i.a.createElement(je.Axis,{name:"X-Axis"}),i.a.createElement(je.Axis,{name:"Tier Value"}),i.a.createElement(je.Legend,null),i.a.createElement(je.Tooltip,{crosshairs:{type:"y"}}),i.a.createElement(je.Geom,{select:!0,type:"interval",position:"X-Axis*Tier Value",color:"name",adjust:[{type:"dodge",marginRatio:1/32}]})))}}]),t}(n.Component);xe.defaultProps={onSiteClicked:function(e){}};var De=xe,Ae=function(e){function t(e){var n;Object(o.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).saveFormRef=function(e){n.formRef=e};var i=a(204).parse(n.props.location.search).sites;return n.state={currentUser:e.currentUser,isLoading:!1,siteId:i,siteData:{},columns:[{title:"Contamination Type",dataIndex:"contaminationType",key:"contaminationType",sorter:function(e,t){return e.contaminationType.length-t.contaminationType.length},sortDirections:["descend","ascend"]},{title:"Chemical Name",dataIndex:"chemicalName",key:"chemicalName",sorter:function(e,t){return e.chemicalName.length-t.chemicalName.length},sortDirections:["descend","ascend"]},{title:"Contamination Value",dataIndex:"contaminationValue",key:"contaminationValue"}]},n.handleBackClick=n.handleBackClick.bind(Object(m.a)(n)),n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"loadData",value:function(){var e,t=this;(e=this.state.siteId,b({url:f+"/site/"+e,method:"GET"})).then(function(e){t.setState({siteData:e})}).catch(function(e){t.setState({siteData:{}})})}},{key:"render",value:function(){return i.a.createElement("div",{className:"user-home-container"},i.a.createElement(v.a,{className:"user-list-page-title",title:"Site Details",onBack:this.handleBackClick}),this.renderSiteDetails(),i.a.createElement("h3",{style:{marginBottom:"32px",marginTop:"48px"}},i.a.createElement("b",null,"Tier 1 Values")),this.renderTierOneChart(),this.renderTierTwoChart(),this.renderTierThreeChart(),this.renderChecmicalContaminents())}},{key:"renderTierOneChart",value:function(){var e=this.state.siteData;if(e&&e.t1){var t=e.siteName,a=[],n=!0,r=!1,l=void 0;try{for(var s,o=["Water","Soil"].entries()[Symbol.iterator]();!(n=(s=o.next()).done);n=!0){var c=s.value,u=Object(Se.a)(c,2),d=(u[0],u[1]),m={};m.name=d,m[e.siteName]=e.t1[d],a.push(m)}}catch(h){r=!0,l=h}finally{try{n||null==o.return||o.return()}finally{if(r)throw l}}return i.a.createElement(De,{fields:t,data:a})}}},{key:"renderTierTwoChart",value:function(){var e=this.state.siteData;if(e&&e.t2){var t=e.t2,a=Object.keys(t),n=[],r=!0,l=!1,s=void 0;try{for(var o,c=["CR","NCR"].entries()[Symbol.iterator]();!(r=(o=c.next()).done);r=!0){var u=o.value,d=Object(Se.a)(u,2),m=(d[0],d[1]),h={};h.name=m;var p=!0,g=!1,f=void 0;try{for(var y,b=a.entries()[Symbol.iterator]();!(p=(y=b.next()).done);p=!0){var v=y.value,k=Object(Se.a)(v,2),C=(k[0],k[1]);h[C]=t[C][m]}}catch(E){g=!0,f=E}finally{try{p||null==b.return||b.return()}finally{if(g)throw f}}n.push(h)}}catch(E){l=!0,s=E}finally{try{r||null==c.return||c.return()}finally{if(l)throw s}}return i.a.createElement("div",null,i.a.createElement("h3",{style:{marginBottom:"32px",marginTop:"48px"}},i.a.createElement("b",null,"Tier 2 Values")),i.a.createElement(De,{fields:a,data:n}))}}},{key:"renderTierThreeChart",value:function(){var e=this.state.siteData;if(e&&e.t3){var t=e.t3,a=Object.keys(t),n=[],r=!0,l=!1,s=void 0;try{for(var o,c=["CR","NCR"].entries()[Symbol.iterator]();!(r=(o=c.next()).done);r=!0){var u=o.value,d=Object(Se.a)(u,2),m=(d[0],d[1]),h={};h.name=m;var p=!0,g=!1,f=void 0;try{for(var y,b=a.entries()[Symbol.iterator]();!(p=(y=b.next()).done);p=!0){var v=y.value,k=Object(Se.a)(v,2),C=(k[0],k[1]);h[C]=t[C][m]}}catch(E){g=!0,f=E}finally{try{p||null==b.return||b.return()}finally{if(g)throw f}}n.push(h)}}catch(E){l=!0,s=E}finally{try{r||null==c.return||c.return()}finally{if(l)throw s}}return i.a.createElement("div",null,i.a.createElement("h3",{style:{marginBottom:"32px",marginTop:"48px"}},i.a.createElement("b",null,"Tier 3 Values")),i.a.createElement(De,{fields:a,data:n}))}}},{key:"renderSiteDetails",value:function(){var e=this.state.siteData;if(e)return i.a.createElement("div",null,i.a.createElement(Oe.a,{bordered:!0,className:"site-details-box"},i.a.createElement(Oe.a.Item,{label:"Site Name"},e.siteName),i.a.createElement(Oe.a.Item,{label:"Site Location",span:2},e.siteLocation),i.a.createElement(Oe.a.Item,{label:"Site State"},e.state),i.a.createElement(Oe.a.Item,{label:"site Org"},e.orgName)))}},{key:"renderChecmicalContaminents",value:function(){var e=this.state.siteData;if(e)return i.a.createElement("div",null,i.a.createElement("h3",{style:{marginBottom:"32px"}},i.a.createElement("b",null,"Site Contaminants")),i.a.createElement(K.a,{rowKey:function(e){return e.id},columns:this.state.columns,dataSource:e.siteContaminant,pagination:!1}))}},{key:"handleBackClick",value:function(){this.props.history.goBack()}}]),t}(n.Component),Pe=function(e){function t(e){var n;Object(o.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).saveFormRef=function(e){n.formRef=e};var i=a(204).parse(e.location.search,{arrayFormat:"comma"}).sites,r="string"===typeof i?[parseInt(i,10)]:i.map(function(e){return parseInt(e,10)});return n.state={currentUser:e.currentUser,isLoading:!1,siteIds:r,sitesData:[],columns:[{title:"Contamination Type",dataIndex:"contaminationType",key:"contaminationType",sorter:function(e,t){return e.contaminationType.length-t.contaminationType.length},sortDirections:["descend","ascend"]},{title:"Chemical Name",dataIndex:"chemicalName",key:"chemicalName",sorter:function(e,t){return e.chemicalName.length-t.chemicalName.length},sortDirections:["descend","ascend"]},{title:"Contamination Value",dataIndex:"contaminationValue",key:"contaminationValue"}]},n.handleBackClick=n.handleBackClick.bind(Object(m.a)(n)),n.getSiteNameKey=n.getSiteNameKey.bind(Object(m.a)(n)),n.handleOnSiteClicked=n.handleOnSiteClicked.bind(Object(m.a)(n)),n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"loadData",value:function(){var e,t=this;(e=this.state.siteIds,b({url:f+"/sites/data",method:"POST",body:JSON.stringify(e)})).then(function(e){t.setState({sitesData:e,singleSiteData:1===e.length?e[0]:null})}).catch(function(e){t.setState({sitesData:[],singleSiteData:null})})}},{key:"getSiteNameKey",value:function(e){return e.siteName+" (id : "+e.id+")"}},{key:"render",value:function(){return i.a.createElement("div",{className:"user-home-container"},i.a.createElement(v.a,{className:"user-list-page-title",title:this.state.isSingleSite?"Site Details":"Compare Sites",onBack:this.handleBackClick}),i.a.createElement("h3",{style:{marginBottom:"32px",marginTop:"48px"}},i.a.createElement("b",null,"Tier 1 Values")),this.renderTierOneChart(),this.renderTierTwoChart(),this.renderTierThreeChart())}},{key:"handleOnSiteClicked",value:function(e){var t=e.substring(e.indexOf("id : ")+5,e.length-1);this.props.history.push("/site-details?sites="+[t]),console.log("Clicked site key "+t)}},{key:"renderTierOneChart",value:function(){var e=this,t=this.state.sitesData;if(t&&t.length>0){var a=t.map(function(t){return e.getSiteNameKey(t)}),n=[],r=!0,l=!1,s=void 0;try{for(var o,c=["Water","Soil"].entries()[Symbol.iterator]();!(r=(o=c.next()).done);r=!0){var u=o.value,d=Object(Se.a)(u,2),m=(d[0],d[1]),h={};h.name=m;var p=!0,g=!1,f=void 0;try{for(var y,b=t.entries()[Symbol.iterator]();!(p=(y=b.next()).done);p=!0){var v=y.value,k=Object(Se.a)(v,2),C=(k[0],k[1]);h[this.getSiteNameKey(C)]=C.t1[m]}}catch(E){g=!0,f=E}finally{try{p||null==b.return||b.return()}finally{if(g)throw f}}n.push(h)}}catch(E){l=!0,s=E}finally{try{r||null==c.return||c.return()}finally{if(l)throw s}}return i.a.createElement(De,{fields:a,data:n,onSiteClicked:this.handleOnSiteClicked})}}},{key:"renderTierTwoChart",value:function(){var e=this.state.sitesData;if(e&&e.length>1){var t=["0-3","3-6","6-10","10-18","18+"],a={},n=!0,r=!1,l=void 0;try{for(var s,o=t.entries()[Symbol.iterator]();!(n=(s=o.next()).done);n=!0){var c=s.value,u=Object(Se.a)(c,2),d=(u[0],u[1]);a[d]=[];a[d].push({name:"NCR"}),a[d].push({name:"CR"})}}catch(q){r=!0,l=q}finally{try{n||null==o.return||o.return()}finally{if(r)throw l}}var m=[],h=!0,p=!1,g=void 0;try{for(var f,y=e.entries()[Symbol.iterator]();!(h=(f=y.next()).done);h=!0){var b=f.value,v=Object(Se.a)(b,2),k=(v[0],v[1]),C=this.getSiteNameKey(k);m.push(C);var E=k.t2,O=!0,S=!1,j=void 0;try{for(var w,N=t.entries()[Symbol.iterator]();!(O=(w=N.next()).done);O=!0){var x=w.value,D=Object(Se.a)(x,2),A=(D[0],D[1]),P=a[A],R=E[A];R&&(P[0][C]=R.NCR,P[1][C]=R.CR),a[A]=P}}catch(q){S=!0,j=q}finally{try{O||null==N.return||N.return()}finally{if(S)throw j}}}}catch(q){p=!0,g=q}finally{try{h||null==y.return||y.return()}finally{if(p)throw g}}var U=[],L=!0,T=!1,I=void 0;try{for(var F,B=t.entries()[Symbol.iterator]();!(L=(F=B.next()).done);L=!0){var V=F.value,G=Object(Se.a)(V,2),M=G[0],z=G[1];U.push(i.a.createElement("h3",{key:"tier2Header"+M,style:{marginBottom:"32px",marginTop:"48px"}},i.a.createElement("b",null,"Tier 2 Values (",z,")"))),U.push(i.a.createElement(De,{key:"tier2Views"+M,fields:m,data:a[z],onSiteClicked:this.handleOnSiteClicked}))}}catch(q){T=!0,I=q}finally{try{L||null==B.return||B.return()}finally{if(T)throw I}}return i.a.createElement("div",null,U)}}},{key:"renderTierThreeChart",value:function(){var e=this.state.sitesData;if(e&&e.length>1){var t=["0-3","3-6","6-10","10-18","18+"],a={},n=!0,r=!1,l=void 0;try{for(var s,o=t.entries()[Symbol.iterator]();!(n=(s=o.next()).done);n=!0){var c=s.value,u=Object(Se.a)(c,2),d=(u[0],u[1]);a[d]=[];a[d].push({name:"NCR"}),a[d].push({name:"CR"})}}catch(q){r=!0,l=q}finally{try{n||null==o.return||o.return()}finally{if(r)throw l}}var m=[],h=!0,p=!1,g=void 0;try{for(var f,y=e.entries()[Symbol.iterator]();!(h=(f=y.next()).done);h=!0){var b=f.value,v=Object(Se.a)(b,2),k=(v[0],v[1]),C=this.getSiteNameKey(k);m.push(C);var E=k.t3,O=!0,S=!1,j=void 0;try{for(var w,N=t.entries()[Symbol.iterator]();!(O=(w=N.next()).done);O=!0){var x=w.value,D=Object(Se.a)(x,2),A=(D[0],D[1]),P=a[A],R=E[A];R&&(P[0][C]=R.NCR,P[1][C]=R.CR),a[A]=P}}catch(q){S=!0,j=q}finally{try{O||null==N.return||N.return()}finally{if(S)throw j}}}}catch(q){p=!0,g=q}finally{try{h||null==y.return||y.return()}finally{if(p)throw g}}var U=[],L=!0,T=!1,I=void 0;try{for(var F,B=t.entries()[Symbol.iterator]();!(L=(F=B.next()).done);L=!0){var V=F.value,G=Object(Se.a)(V,2),M=G[0],z=G[1];U.push(i.a.createElement("h3",{key:"tier3Header"+M,style:{marginBottom:"32px",marginTop:"48px"}},i.a.createElement("b",null,"Tier 3 Values (",z,")"))),U.push(i.a.createElement(De,{key:"tier3Views"+M,fields:m,data:a[z],onSiteClicked:this.handleOnSiteClicked}))}}catch(q){T=!0,I=q}finally{try{L||null==B.return||B.return()}finally{if(T)throw I}}return i.a.createElement("div",null,U)}}},{key:"handleBackClick",value:function(){this.props.history.goBack()}}]),t}(n.Component),Re=p.a.Content,Ue=p.a.Footer,Le=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={currentUser:null,isAuthenticated:null!=localStorage.getItem(y),isLoading:!1},a.handleLogout=a.handleLogout.bind(Object(m.a)(a)),a.loadCurrentUser=a.loadCurrentUser.bind(Object(m.a)(a)),a.handleLogin=a.handleLogin.bind(Object(m.a)(a)),a.handleDetails=a.handleDetails.bind(Object(m.a)(a)),s.a.config({placement:"topRight",top:70,duration:3}),a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"loadCurrentUser",value:function(){var e=this;this.setState({isLoading:!0}),(localStorage.getItem(y)?b({url:f+"/user/me",method:"GET"}):Promise.reject("No access token set.")).then(function(t){e.setState({currentUser:t,isAuthenticated:!0,isLoading:!1})}).catch(function(t){e.setState({isLoading:!1,isAuthenticated:!1})})}},{key:"componentDidMount",value:function(){this.loadCurrentUser()}},{key:"handleLogout",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/login",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"You're successfully logged out.";localStorage.removeItem(y),this.setState({currentUser:null,isAuthenticated:!1}),this.props.history.push(e),s.a[t]({message:"rankCare",description:a})}},{key:"handleLogin",value:function(){s.a.success({message:"rankCare",description:"You're successfully logged in."}),this.loadCurrentUser(),this.props.history.push("/")}},{key:"handleDetails",value:function(e){}},{key:"render",value:function(){var e=this;return this.state.isLoading?i.a.createElement(_,null):i.a.createElement(p.a,{className:"app-container"},i.a.createElement(z,{isAuthenticated:this.state.isAuthenticated,currentUser:this.state.currentUser,onLogout:this.handleLogout}),i.a.createElement(Re,{className:"app-content"},i.a.createElement("div",{className:"test-container"},i.a.createElement(g.d,null,i.a.createElement(g.b,{exact:!0,path:"/",render:function(t){return e.state.isAuthenticated?i.a.createElement(S,Object.assign({isAuthenticated:e.state.isAuthenticated,currentUser:e.state.currentUser},t)):i.a.createElement(g.a,{to:"/login"})}}),i.a.createElement(g.b,{path:"/login",render:function(t){return i.a.createElement(P,Object.assign({onLogin:e.handleLogin},t))}}),i.a.createElement(g.b,{exact:!0,path:"/manage-users",render:function(t){return e.state.isAuthenticated&&e.state.currentUser&&e.state.currentUser.isAdmin?i.a.createElement(ae,Object.assign({currentUser:e.state.currentUser},t)):i.a.createElement(g.a,{to:"/"})}}),i.a.createElement(g.b,{exact:!0,path:"/toxicity",render:function(t){return e.state.isAuthenticated&&e.state.currentUser?i.a.createElement(se,Object.assign({currentUser:e.state.currentUser},t)):i.a.createElement(g.a,{to:"/"})}}),i.a.createElement(g.b,{exact:!0,path:"/consumption",render:function(t){return e.state.isAuthenticated&&e.state.currentUser?i.a.createElement(he,Object.assign({currentUser:e.state.currentUser},t)):i.a.createElement(g.a,{to:"/"})}}),i.a.createElement(g.b,{exact:!0,path:"/sites",render:function(t){return e.state.isAuthenticated&&e.state.currentUser?i.a.createElement(Ee,Object.assign({onDetails:e.handleDetails,currentUser:e.state.currentUser},t)):i.a.createElement(g.a,{to:"/"})}}),i.a.createElement(g.b,{exact:!0,path:"/site-details",render:function(t){return e.state.isAuthenticated&&e.state.currentUser?i.a.createElement(Ae,Object.assign({currentUser:e.state.currentUser},t)):i.a.createElement(g.a,{to:"/"})}}),i.a.createElement(g.b,{exact:!0,path:"/site-compare",render:function(t){return e.state.isAuthenticated&&e.state.currentUser?i.a.createElement(Pe,Object.assign({currentUser:e.state.currentUser},t)):i.a.createElement(g.a,{to:"/"})}}),i.a.createElement(g.b,{component:q})))),i.a.createElement(Ue,{style:{textAlign:"center"}},"rankCare \xa92019 CRC CARE Ptv Ltd. All Rights Reserved"))}}]),t}(n.Component),Te=Object(g.g)(Le),Ie=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Fe(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}l.a.render(i.a.createElement(L.a,null,i.a.createElement(Te,null)),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/login",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("/login","/service-worker.js");Ie?(!function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):Fe(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):Fe(e)})}}()}},[[222,1,2]]]);
//# sourceMappingURL=main.cf17fb13.chunk.js.map